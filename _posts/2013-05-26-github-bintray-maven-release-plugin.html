---
layout: post
title: "Publishing releases using Github, Bintray and maven-release-plugin"
category: tech
tags:
 - Maven
blogger: /2013/05/github-bintray-maven-release-plugin.html
---

<h2>Project setup</h2>
<ol>
<li>
<p>
Add an SCM section to your POM so that maven-release-plugin can create a tag during the release process:
</p>
<pre><code>
&lt;scm>
  &lt;connection>scm:git:https://github.com/<i>github-user</i>/<i>github-repo</i>.git&lt;/connection>
  &lt;developerConnection>scm:git:git@github.com:<i>github-user</i>/<i>github-repo</i>.git&lt;/developerConnection>
  &lt;url>https://github.com/<i>github-user</i>/<i>github-repo</i>&lt;/url>
  &lt;tag>HEAD&lt;/tag>
&lt;/scm>
</code></pre>
<p>
The developer connection uses the SSH protocol, so that no password authentication is required. Note that this assumes that you uploaded your public key to Github.
</p>
</li>
<li>
<p>
Go to the Bintray Web site and create a new package in your repository.
</p>
</li>
<li>
<p>
Add a distribution management section to your POM with a reference to that package:
</p>
<pre><code>
&lt;distributionManagement>
  &lt;repository>
    &lt;id>bintray&lt;/id>
    &lt;url>https://api.bintray.com/maven/<i>bintray-user</i>/<i>bintray-repo</i>/<i>package</i>&lt;/url>
  &lt;/repository>
&lt;/distributionManagement>
</code></pre>
</li>
<li>
<p>
Add your Bintray credentials to <code>settings.xml</code>. Note that Bintray REST API <a href="https://bintray.com/docs/rest/api.html#_authentication">uses API keys</a> instead of passwords:
</p>
<pre><code>
&lt;server>
  &lt;id>bintray&lt;/id>
  &lt;username><i>bintray-user</i>&lt;/username>
  &lt;password><i>bintray-api-key</i>&lt;/password>
&lt;/server>
</code></pre>
</li>
<li>
<p>
Add the release plugin to your POM:
</p>
<pre><code>
&lt;build>
  &lt;plugins>
    &lt;plugin>
      &lt;artifactId>maven-release-plugin&lt;/artifactId>
      &lt;version>2.4.1&lt;/version>
      &lt;configuration>
        &lt;useReleaseProfile>false&lt;/useReleaseProfile>
        &lt;releaseProfiles>release&lt;/releaseProfiles>
        &lt;autoVersionSubmodules>true&lt;/autoVersionSubmodules>
      &lt;/configuration>
    &lt;/plugin>
  &lt;/plugins>
&lt;/build>
</code></pre>
<p>
To deploy source and Javadoc JARs for releases, use the following release profile:
</p>
<pre><code>
&lt;profiles>
  &lt;profile>
    &lt;id>release&lt;/id>
    &lt;build>
      &lt;plugins>
        &lt;plugin>
          &lt;artifactId>maven-source-plugin&lt;/artifactId>
          &lt;executions>
            &lt;execution>
              &lt;id>attach-sources&lt;/id>
              &lt;goals>
                &lt;goal>jar&lt;/goal>
              &lt;/goals>
            &lt;/execution>
          &lt;/executions>
        &lt;/plugin>
        &lt;plugin>
          &lt;artifactId>maven-javadoc-plugin&lt;/artifactId>
          &lt;executions>
            &lt;execution>
              &lt;id>attach-javadocs&lt;/id>
              &lt;goals>
                &lt;goal>jar&lt;/goal>
              &lt;/goals>
            &lt;/execution>
          &lt;/executions>
        &lt;/plugin>
      &lt;/plugins>
    &lt;/build>
  &lt;/profile>
&lt;/profiles>
</code></pre>
<p>
You should validate the release profile by executing it as follows:
</p>
<pre><code>
mvn -Prelease clean install
</code></pre>
</li>
</ol>
<h2>Performing a release</h2>
<ol>
<li>
<p>
Go the the Bintray Web site and add a new version for the package.
</p>
</li>
<li>
<p>
Execute the release process as follows:
</p>
<pre><code>
mvn release:prepare
mvn release:perform
</code></pre>
</li>
<li>
<p>Go to the Bintray Web site and publish the new version.
</li>
</ol>
<h2>Using the project as dependency</h2>
<p>
To use your project as a dependency in another project, add the following repository declaration:
</p>
<pre><code>
&lt;repositories>
  &lt;repository>
    &lt;id>bintray&lt;/id>
    &lt;url>http://dl.bintray.com/<i>bintray-user</i>/<i>bintray-repo</i>&lt;/url>
    &lt;releases>
      &lt;enabled>true&lt;/enabled>
    &lt;/releases>
    &lt;snapshots>
      &lt;enabled>false&lt;/enabled>
    &lt;/snapshots>
  &lt;/repository>
&lt;/repositories>
</code></pre>